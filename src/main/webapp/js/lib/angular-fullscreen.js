(function(e){var t=function(e){var t=e.module("FBAngular",[]);t.factory("Fullscreen",["$document","$rootScope",function(t,n){var r=t[0];var i=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT;var s=n.$new();t.on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){s.$emit("FBFullscreen.change",o.isEnabled())});var o={$on:e.bind(s,s.$on),all:function(){o.enable(r.documentElement)},enable:function(e){if(e.requestFullScreen){e.requestFullScreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){if(/Version\/[\d]{1,2}(\.[\d]{1,2}){1}(\.(\d){1,2}){0,1} Safari/.test(navigator.userAgent)){e.webkitRequestFullscreen()}else{e.webkitRequestFullscreen(i)}}else if(e.msRequestFullscreen){e.msRequestFullscreen()}},cancel:function(){if(r.cancelFullScreen){r.cancelFullScreen()}else if(r.mozCancelFullScreen){r.mozCancelFullScreen()}else if(r.webkitExitFullscreen){r.webkitExitFullscreen()}else if(r.msExitFullscreen){r.msExitFullscreen()}},isEnabled:function(){var e=r.fullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||r.msFullscreenElement;return e?true:false},toggleAll:function(){o.isEnabled()?o.cancel():o.all()},isSupported:function(){var e=r.documentElement;var t=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen;return t?true:false}};return o}]);t.directive("fullscreen",["Fullscreen",function(e){return{link:function(t,n,r){if(r.fullscreen){t.$watch(r.fullscreen,function(t){var r=e.isEnabled();if(t&&!r){e.enable(n[0]);n.addClass("isInFullScreen")}else if(!t&&r){e.cancel();n.removeClass("isInFullScreen")}});var i=e.$on("FBFullscreen.change",function(e,i){if(!i){t.$evalAsync(function(){t[r.fullscreen]=false;n.removeClass("isInFullScreen")})}});t.$on("$destroy",function(){i()})}else{if(r.onlyWatchedProperty!==undefined){return}n.on("click",function(t){e.enable(n[0])})}}}}]);return t};if(typeof define==="function"&&define.amd){define("FBAngular",["angular"],function(e){return t(e)})}else{t(e.angular)}})(window)